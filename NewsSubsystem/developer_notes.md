Developer Notes for News Subsystem
This document provides insights from the development of the standalone news subsystem, a lightweight backend for curating cryptocurrency-related articles using the Sonar API. It outlines design choices, performance, limitations, and future improvements to help users and developers understand and extend the system.
Development Process

AI Assistance: I leveraged AI tools to extract the news subsystem from the original system, ensuring it remains minimal and focused on the sonarNewsService.js functionality.
Testing Environment: I tested the subsystem on Windows using PowerShell’s Invoke-RestMethod commands (see invoke_cmds.md). Users on other platforms may need to adjust curl commands (see curl_cmds.md) for compatibility, particularly with quoting or escaping in Windows terminals like Command Prompt or PowerShell.

Performance

Response Times:
For queries with no data or short responses, the system responds in 3–5 seconds. We almost always get a response. 
For data-heavy queries (e.g., multiple articles with detailed summaries), response times are closer to 8 seconds, occasionally as low as 5 seconds.


Model Choice:
The subsystem uses the sonar-pro model for a more enhanced search.
I was trying to balance the fact that Perplexity will always call the latest or most relevant data, so I chose more articles at once.
I tried multiple methods of pulling lower amounts, but source results were almost always duplicates.
Searching 3 deep with normal sonar only provided 5 unique results with over 20 tests. 
Even pro struggles to get unique articles with subsequent runs, because I have made no system to stop that.
I used a social feed and global freshness indicators in my app to mitigate this, letting users know the data is already available. 
The social aspect also helped mitigate the cost of pro, by letting ANY user view the articles generated by one. 
If you wanted, you could likely build a dynamic blacklist cache by saving the exact sources from the response into an array that gets fed back into the prompt. I was not willing to take things this far here due to demo and budgeting constraints. 




News Query Behavior

Data Sensitivity: The news queries can be sensitive to market conditions and data availability.
This varies wildly based on the interest used. You can theoretically put any interest in here, and its not all that different from using normal Perplexity. 
But I think saving the articles for two weeks and giving them a social feed post makes good use of Perplexities traits, and helps users who may not be good at prompting, or understand AI, or otherwise be adverse to AI, a way to easily view the content generated by AI. 
This is by far my most flexible subsystem, as it is pretty much just hard prompting keywords. But it should be easy to mod to any niche or interest type, making it pretty cool I think. 

Future Improvements:
Potentially a feature using deep research, or expanding the number of articles searched.
Most likely implementing a dynamic blacklist system, or variables in the prompt to encourage new articles on subsequent generations. 
However, the news is still always limited in relevant scope based on current events, so its possible a blacklist system doesn't help much when combined with precise niching. 
Maybe we could try to increase niche focus. 




Data Structure and UI/UX

JSON Structure: The response structure in sonarNewsService.js is designed for UI/UX integration, with raw JSON responses (e.g., choices[0].message.content containing news_status, articles, reason, sources) that are easy to parse and style.
Flexibility: The subsystem is a simple backend, designed to be adaptable. Developers can modify the .json structure in sonarNewsService.js to meet specific UI needs or add custom formatting with minimal logic.
NLP Consideration: I considered adding a secondary Natural Language Processing (NLP) layer for response enhancement, but testing showed Perplexity’s Sonar model consistently delivered structured JSON, even in the basic version. This reliability eliminated the need for additional NLP, keeping the system lightweight.

Limitations and Future Work

Data Availability: The subsystem depends on Perplexity’s access to published data. Queries may return “No Content Found” if relevant data isn’t available, especially for niche or real-time metrics.
Response Optimization: Response times (3–8 seconds) are acceptable, but caching frequent queries or optimizing API calls could reduce latency for data-heavy responses.

Conclusion
This subsystem is a streamlined, standalone backend for cryptocurrency news curation, retaining the original system’s core functionality without authentication. It provides raw, structured JSON responses for flexibility and transparency. Developers can easily adapt the JSON structure or integrate additional APIs to enhance its capabilities, making it a robust foundation for further development.
